<html lang="en">

<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<title>什么是计算？ - 文明·空间</title>
<link rel="shortcut icon" href="https://wenming.space/favicon.ico">
<link href="https://cdn.jsdelivr.net/npm/remixicon@2.2.0/fonts/remixicon.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.7.2/animate.min.css">
<link rel="stylesheet" href="https://wenming.space/media/css/tailwind.css">
<link rel="stylesheet" href="https://wenming.space/styles/main.css">
<link rel="alternate" type="application/atom+xml" title="什么是计算？ - 文明·空间 - Atom Feed" href="https://wenming.space/atom.xml">

    

  <meta name="description" content="在讲什么是计算之前，我们需要来了解一样更加基础的东西。你先来想一想，数学里面最基础的知识是什么呢？ 答案很简单，就是数数，我们最先学会的数学不就是数一二三四五吗？

数字是怎么来的？
原始人是如何数数的？
我们先一起回到原始时代，来看看数学..." />
  <meta property="og:title" content="什么是计算？ - 文明·空间">
  <meta property="og:description" content="在讲什么是计算之前，我们需要来了解一样更加基础的东西。你先来想一想，数学里面最基础的知识是什么呢？ 答案很简单，就是数数，我们最先学会的数学不就是数一二三四五吗？

数字是怎么来的？
原始人是如何数数的？
我们先一起回到原始时代，来看看数学..." />
  <meta property="og:type" content="articles">
  <meta property="og:url" content="https://wenming.space/post/What-is-computation/" />
  <meta property="og:image" content="https://wenming.space/images/avatar.png">
  <meta property="og:image:height" content="630">
  <meta property="og:image:width" content="1200">
  <meta name="twitter:title" content="什么是计算？ - 文明·空间">
  <meta name="twitter:description" content="在讲什么是计算之前，我们需要来了解一样更加基础的东西。你先来想一想，数学里面最基础的知识是什么呢？ 答案很简单，就是数数，我们最先学会的数学不就是数一二三四五吗？

数字是怎么来的？
原始人是如何数数的？
我们先一起回到原始时代，来看看数学...">
  <meta name="twitter:card" content="summary_large_image">
  <link rel="canonical" href="https://wenming.space/post/What-is-computation/">

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css">
 
  
    <link rel="stylesheet" href="https://wenming.space/media/css/prism-atom-dark.css">
  

  
</head>

<body>
  <div class="antialiased flex flex-col min-h-screen" id="app">
    <a href="https://wenming.space" class="fixed top-0 left-0 mt-4 bg-black text-white dark:text-gray-700 dark:bg-yellow-50 dark:hover:bg-black dark:hover:text-white inline-flex p-2 pl-8 hover:text-gray-700 hover:bg-yellow-50 font-bold z-10 transition-fast animated fadeInLeft">
      文明·空间
    </a>
    <div class="max-w-4xl w-full mx-auto">
      <div class="shadow-box bg-white dark:bg-gray-600 rounded-lg pt-32 md:pt-64 px-4 md:px-8 pb-8 animated fadeIn mb-8">
        <h1 class="text-5xl font-semibold leading-normal pb-8 mb-8 border-b-8 border-gray-700">
          什么是计算？
        </h1>
        
        <div class="mb-8 flex flex-wrap">
          <div class="text-gray-400 text-sm mr-4">3135字 · 11分钟阅</div>
          
            <a href="https://wenming.space/tag/fQLCWY2dv/" class="text-gray-700 text-sm border-b-2 border-dotted border-gray-200 hover:border-gray-600 transition-all duration-100 inline-flex mr-2">
              <i class="ri-hashtag"></i>
              《比特世界漫游指南》
            </a>
          
        </div>
        <div class="markdown mb-8" v-pre>
          <p>在讲什么是计算之前，我们需要来了解一样更加基础的东西。你先来想一想，数学里面最基础的知识是什么呢？ 答案很简单，就是数数，我们最先学会的数学不就是数一二三四五吗？</p>
<!-- more -->
<h1 id="数字是怎么来的"><strong>数字是怎么来的？</strong></h1>
<h4 id="原始人是如何数数的">原始人是如何数数的？</h4>
<p>我们先一起回到原始时代，来看看数学最早是怎么产生的。</p>
<p>在那个原始时代，那个时候人类还没有文字、没有数学，原始人都一起住在山洞里面，每天靠打猎、采集水果为生。</p>
<p>住在一起有个问题，我要是白天去打猎的话，那我存在家里的食物，就得防止它被别人偷了。</p>
<p>打个比方说：我好不容易弄到一堆水果🍉，还没吃完，我把它存到我的洞穴里面，白天我出去打猎了，那晚上我回到家的时候，万一我的水果少了怎么半？我怎么才能知道我的水果有没有少？</p>
<p>这时候数数就要出场了，如果我会数数，我早上出门前先数一数我的水果，我有<strong>9</strong>个水果，那我现在只需要记住“9”这个数字就行了。</p>
<p>等我打了一天的猎，晚上回到家，只要“9”这个数字没有忘记，那我就能一直精确的记得我的水果有多少，我只需要再去数一遍水果就能知道我的水果到底有没有少了。<strong>这就是数学一个很重要的点，它是精确的。</strong></p>
<p>但是数数可没有那么简单，原始人要学会数数得有两个最基本的思想，这两个思想非常的高级，一般人上了大学都没学过。</p>
<h4 id="离散">离散</h4>
<p>第一个思想叫做<strong>离散</strong>。离散的意思很简单，就说要<strong>把原来连在一起的东西给它分开，离散就是数数的基础。</strong></p>
<p>你想象一下，那个原始人去数一堆水果的时候，他得做一个动作，先从那个水果里面拿出一个水果，放到一边说这是1，再拿出一个放到一边说这是2.</p>
<p>这个把一堆混在一起的水果一个一个拿出来的动作，就相当于在把一堆水果分开，这个动作就叫做离散。如果没有离散，原始人就不可能去数数。</p>
<h4 id="抽象">抽象</h4>
<p>数数还需要的第二个思想叫做<strong>抽象</strong>。具体的说，就是要把不同的东西看成是一样的，在数水果这件事情里面就是要把不一样的水果看成是一样的。</p>
<p>比如，你要是仔细观察的话，你会发现那些水果有的大、有的小、有的红、有的绿。</p>
<p>可是我们如果把这些水果看成是不一样的，我们觉得红色的水果和绿色的水果不是一个东西，那我们就没有办法把它们放在一起数了。</p>
<p>所以，<strong>把不一样的东西抽象成一样的东西，这个思想也是数数的基础</strong></p>
<h4 id="离散与抽象">离散与抽象</h4>
<p><strong>离散和抽象之所以重要，是因为使用它们可以把混成一团的事物分解成一个一个最基本的单元，这样就可以把复杂的事情变得非常简单，变得容易分析。</strong></p>
<h1 id="计算的本质">计算的本质</h1>
<h2 id="手指算数">手指算数</h2>
<p>每个人都做过计算，只是大部分人都没有理解自己在做什么。回想一下幼儿园（大概四岁）的时候，妈妈问你：“帮我算一下，4+3 等于几？” 你掰了一会手指，回答：7。当你掰手指的时候，你自己就是一台简单的计算机。</p>
<p>不要小看了这手指算术，它蕴含着深刻的原理。计算机科学植根于这类非常简单的过程，而不是复杂的高等数学。</p>
<p>现在我们来回忆一下这个过程。这里应该有一段动画，但现阶段还没有。请你对每一步发挥一下想象力，增加点“画面感”。</p>
<ol>
<li>当妈妈问你“4+3 等于几”的时候，她是一个程序员，你是一台计算机。计算机得到程序员的输入：4，+，3。</li>
<li>听到妈妈的问题之后，你拿出两只手，左手伸出四个指头，右手伸出三个指头。</li>
<li>接着你开始自己的计算过程。一根根地数那些竖起来的手指，每数一根你就把它弯下去，表示它已经被数过了。你念道：“1，2，3，4，5，6，7。”</li>
<li>现在已经没有手指伸着，所以你把最后数到的那个数作为答案：7！整个计算过程就结束了。</li>
</ol>
<h2 id="符号和模型">符号和模型</h2>
<p>这里的幼儿园手指算术包含着深刻的哲学问题，现在我们来初步体会一下这个问题。</p>
<p>当妈妈说“帮我算 4+3”的时候，4，+，3，三个字符传到你耳朵里，它们都是符号（symbol）。符号是“表面”的东西：光是盯着“4”和“3”这两个阿拉伯数字的曲线，一个像旗子，一个像耳朵，你是不能做什么的。你需要先用脑子把它们转换成对应的“模型”（model）。这就是为什么你伸出两只手，一只手表示 4，另一只表示 3。</p>
<p>这两只手的手势是“可操作”的。比如，你把左手再多弯曲一个手指，它就变成“3”。你再伸开一根手指，它就变成“5”。所以手指是一个相当好的机械模型，它是可以动，可操作的。把符号“4”和“3”转换成手指模型之后，你就可以开始计算了。</p>
<p>你怎么知道“4”和“3”对应什么样的手指模型呢？因为妈妈以前教过你。十根手指，对应着 1 到 10 十个数。这就是为什么人都用十进制数做算术。</p>
<p>我们现在没必要深究这个问题。我只是提示你，分清“符号”和“模型”是重要的。</p>
<h2 id="计算图">计算图</h2>
<p>在计算机领域，我们经常用一些抽象的图示来表达计算的过程，这样就能直观地看到信息的流动和转换。这种图示看起来是一些形状用箭头连接起来。我在这里把它叫做“计算图”。</p>
<p>对于以上的手指算术 4 + 3，我们可以用下图来表示它：</p>
<figure data-type="image" tabindex="1"><img src="https://wenming.space/post-images/1609765660561.png" alt="adder-topdown" width="300" height="750" loading="lazy"></figure>
<p>图中的箭头表示信息的流动方向。说到“流动”，你可以想象一下水的流动。首先我们看到数字 4 和 3 流进了一个圆圈，圆圈里有一个“+”号。这个圆圈就是你，一个会做手指加法的小孩。妈妈给你两个数 4 和 3，你现在把它们加起来，得到 7 作为结果。</p>
<p>注意圆圈的输入和输出方向是由箭头决定的，我们可以根据需要调整那些箭头的位置，只要箭头的连接关系和方向不变就行。它们不一定都是从左到右，也可能从右到左或者从上到下，但“出入关系”都一样：4 和 3 进去，结果 7 出来。比如它还可以是这样：</p>
<figure data-type="image" tabindex="2"><img src="https://wenming.space/post-images/1609765670247.png" alt="adder-topdown" width="300" height="750" loading="lazy"></figure>
<p>我们用带加号的圆圈表示一个“加法器”。顾名思义，加法器可以帮我们完成加法。在上个例子里，你就是一个加法器。我们也可以用其他装置作为加法器，比如一堆石头，一个算盘，某种电子线路…… 只要它能做加法就行。</p>
<p>具体要怎么做加法，就像你具体如何掰手指，很多时候我们是不关心的，我们只需要知道这个东西能做加法就行。圆圈把具体的加法操作给“抽象化”了，这个蓝色的圆圈可以代表很多种东西。抽象（abstraction）是计算机科学至关重要的思维方法，它帮助我们进行高层面的思考，而不为细节所累。</p>
<h2 id="表达式">表达式</h2>
<p>计算机科学当然不止 4 + 3 这么简单，但它的基本元素确实是如此简单。我们可以创造出很复杂的系统，然而归根结底，它们只是在按某种顺序计算像 4 + 3 这样的东西。</p>
<p>4 + 3 是一个很简单的表达式（expression）。你也许没听说过“表达式”这个词，但我们先不去定义它。我们先来看一个稍微复杂一些的表达式：</p>
<pre><code class="language-typescript">2 * (4 + 3)
</code></pre>
<p>这个表达式比 4 + 3 多了一个运算，我们把它叫做“复合表达式”。这个表达式也可以用计算图来表示：</p>
<figure data-type="image" tabindex="3"><img src="https://wenming.space/post-images/1609766474246.png" alt="" width="360" height="750" loading="lazy"></figure>
<p>你知道它为什么是这个样子吗？它表示的意思是，先计算 4 + 3，然后把结果（7）传送到一个“乘法器”，跟 2 相乘，得到最后的结果。那正好就是 2 * (4 + 3) 这个表达式的含义，它的结果应该是 14。</p>
<p>为什么要先计算 4 + 3 呢？因为当我们看到乘法器 2 * ... 的时候，其中一个输入（2）是已知的，而另外一个输入必须通过加法器的输出得到。加法器的结果是由 4 和 3 相加得到的，所以我们必须先计算 4 + 3，然后才能与 2 相乘。</p>
<p>小学的时候，你也许学过：“括号内的内容要先计算”。其实括号只是“符号层”的东西，它并不存在于计算图里面。我这里讲的“计算图”，其实才是本质的东西。数学的括号一类的东西，都只是表象，它们是符号或者叫“语法”。从某种意义上讲，计算图才是表达式的本质或者“模型”，而“2 * (4 + 3)”这串符号，只是对计算图的一种表示或者“编码”（coding）。</p>
<p>这里我们再次体会到了“符号”和“模型”的差别。符号是对模型的“表示”或者“编码”。我们必须从符号得到模型，才能进行操作。这种从符号到模型的转换过程，在计算机科学里叫做“语法分析”（parsing）。我们会在后面的章节理解这个过程。</p>
<p>我们现在来给表达式做一个初步的定义。这并不是完整的定义，但你应该试着理解这种定义的方式。稍后我们会逐渐补充这个定义，逐渐完善。</p>
<p>定义（表达式）：<strong>表达式</strong>可以是如下几种东西。</p>
<ol>
<li>数字是一个表达式。比如 1，2，4，15，……</li>
<li>表达式 + 表达式。两个表达式相加，也是表达式。</li>
<li>表达式 - 表达式。两个表达式相减，也是表达式。</li>
<li>表达式 * 表达式。两个表达式相乘，也是表达式。</li>
<li>表达式 / 表达式。两个表达式相除，也是表达式。</li>
</ol>
<p>注意，由于我们之前讲过的符号和模型的差别，为了完全忠于我们的本质认识，这里的“表达式 + 表达式”虽然看起来是一串符号，它必须被想象成它所对应的模型。当你看到“表达式”的时候，你的脑子里应该浮现出它对应的计算图，而不是一串符号。这个计算图的画面大概是这个样子，其中左边的大方框里可以是任意两个表达式。</p>
<figure data-type="image" tabindex="4"><img src="https://wenming.space/post-images/1609766595809.png" alt="" width="360" height="750" loading="lazy"></figure>
<p>是不是感觉这个定义有点奇怪？因为在“表达式”的定义里，我们用到了“表达式”自己。这种定义叫做“递归定义”。所谓递归（recursion），就是在一个东西的定义里引用这个东西自己。看上去很奇怪，好像绕回去了一样。递归是一个重要的概念，我们会在将来深入理解它。</p>
<p><strong>现在我们可以来验证一下，根据我们的定义，2 * (4 + 3) 确实是一个表达式：</strong></p>
<ul>
<li>首先根据第一种形式，我们知道 4 是表达式，因为它是一个数字。3 也是表达式，因为它是一个数字。</li>
<li>所以 4 + 3 是表达式，因为 + 的左右都是表达式，它满足表达式定义的第二种形式。</li>
<li>所以 2 * (4 + 3) 是表达式，因为 * 的左右都是表达式，它满足表达式定义的第四种形式。</li>
</ul>
</br>
</br>
</br>
</br>
        </div>

          <div class="license">
            <div class="license-title">什么是计算？</div>
            <div class="license-link">
              <a href="https://wenming.space/post/What-is-computation/">https://wenming.space/post/What-is-computation/</a>
            </div>
            <div class="license-meta">
              <div class="license-meta-item">
                <div class="license-meta-title">本文作者</div>
                <div class="license-meta-text">西红柿汤圆</div>
              </div>
              <div class="license-meta-item">
                <div class="license-meta-title">发布于</div>
                <div class="license-meta-text">2021-01-04</div>
              </div>
              <div class="license-meta-item">
                <div class="license-meta-title">许可协议</div>
                <div class="license-meta-text"><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh"
                    rel="nofollow noopener noreferrer" target="_blank">CC BY-NC-SA 4.0</a></div>
              </div>
            </div>
            <div class="license-text">转载或引用本文时请遵守许可协议，注明出处、不得用于商业用途！</div>
          </div>

        
      </div>

      
        <div class="my-4 flex justify-between px-4 md:px-0">
          
            <a href="https://wenming.space/post/why-tow/" class="btn btn-white">
              <i class="ri-arrow-left-line mr-4"></i>
              上一篇
            </a>
          
          
            <a href="https://wenming.space/post/daima/" class="btn btn-white">
              下一篇
              <i class="ri-arrow-right-line ml-4"></i>
            </a>
          
        </div>
      

      

      
        <div id="vlaine-comment"></div>
      

      <footer class="py-12 text-center px-4 md:px-0" v-pre>
  Powered By Gride
</footer>
    </div>

    <!-- TOC Container -->
    <div class="fixed right-0 bottom-0 mb-16 mr-4 shadow w-8 h-8 rounded-full flex justify-center items-center z-10 cursor-pointer bg-white dark:bg-gray-500 dark:text-gray-200 hover:shadow-lg transition-all animated fadeInRight" @click="showToc = true">
      <i class="ri-file-list-line"></i>
    </div>

    <div class="fixed right-0 top-0 bottom-0 overflow-y-auto w-64 bg-white dark:bg-gray-800 p-4 border-l border-gray-100 dark:border-gray-600 z-10 transition-fast" :class="{ '-mr-64': !showToc }">
      <div class="flex mb-4 justify-end">
        <div class="w-8 h-8 inline-flex justify-center items-center rounded-full cursor-pointer hover:bg-gray-200 dark:hover:bg-gray-600 transition-fast" @click="showToc = false">
          <i class="ri-close-line text-lg"></i>
        </div>
      </div>
      <div class="post-toc-container">
        <ul class="markdownIt-TOC">
<li><a href="#%E6%95%B0%E5%AD%97%E6%98%AF%E6%80%8E%E4%B9%88%E6%9D%A5%E7%9A%84"><strong>数字是怎么来的？</strong></a><br>
*<br>
*<br>
* <a href="#%E5%8E%9F%E5%A7%8B%E4%BA%BA%E6%98%AF%E5%A6%82%E4%BD%95%E6%95%B0%E6%95%B0%E7%9A%84">原始人是如何数数的？</a><br>
* <a href="#%E7%A6%BB%E6%95%A3">离散</a><br>
* <a href="#%E6%8A%BD%E8%B1%A1">抽象</a><br>
* <a href="#%E7%A6%BB%E6%95%A3%E4%B8%8E%E6%8A%BD%E8%B1%A1">离散与抽象</a></li>
<li><a href="#%E8%AE%A1%E7%AE%97%E7%9A%84%E6%9C%AC%E8%B4%A8">计算的本质</a>
<ul>
<li><a href="#%E6%89%8B%E6%8C%87%E7%AE%97%E6%95%B0">手指算数</a></li>
<li><a href="#%E7%AC%A6%E5%8F%B7%E5%92%8C%E6%A8%A1%E5%9E%8B">符号和模型</a></li>
<li><a href="#%E8%AE%A1%E7%AE%97%E5%9B%BE">计算图</a></li>
<li><a href="#%E8%A1%A8%E8%BE%BE%E5%BC%8F">表达式</a></li>
</ul>
</li>
</ul>

      </div>
    </div>

    <!-- Back to top -->
    <div class="fixed right-0 bottom-0 mb-4 mr-4 shadow w-8 h-8 rounded-full flex justify-center items-center z-10 cursor-pointer bg-white hover:shadow-lg transition-all dark:bg-gray-500 dark:text-gray-200" @click="backToUp" v-show="scrolled">
      <i class="ri-arrow-up-line"></i>
    </div>
  </div>

  <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">
  <!-- Background of PhotoSwipe. 
        It's a separate element as animating opacity is faster than rgba(). -->
  <div class="pswp__bg">
  </div>
  <!-- Slides wrapper with overflow:hidden. -->
  <div class="pswp__scroll-wrap">
    <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
    <div class="pswp__container">
      <div class="pswp__item">
      </div>
      <div class="pswp__item">
      </div>
      <div class="pswp__item">
      </div>
    </div>
    <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
    <div class="pswp__ui pswp__ui--hidden">
      <div class="pswp__top-bar">
        <!--  Controls are self-explanatory. Order can be changed. -->
        <div class="pswp__counter">
        </div>
        <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
        <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
        <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
        <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
        <!-- element will get class pswp__preloader--active when preloader is running -->
        <div class="pswp__preloader">
          <div class="pswp__preloader__icn">
            <div class="pswp__preloader__cut">
              <div class="pswp__preloader__donut">
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
        <div class="pswp__share-tooltip">
        </div>
      </div>
      <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
      </button>
      <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
      </button>
      <div class="pswp__caption">
        <div class="pswp__caption__center">
        </div>
      </div>
    </div>
  </div>
</div>

  <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
  <script src="https://wenming.space/media/scripts/main.js"></script>
  
  <!-- Code Highlight -->
  
    <script src="https://wenming.space/media/prism.js"></script>
    <script>
      Prism.highlightAll()
    </script>
  

  <script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"></script>
  <script>
    //拿到预览框架，也就是上面的html代码
    var pswpElement = document.querySelectorAll('.pswp')[0];
    //定义图片数组变量
    var imgitems;
    /**
    * 用于显示预览界面
    * @param index 图片数组下标
    */
    function viewImg(index) {
      //其它选项这里不做过多阐述，详情见官网
      var pswpoptions = {
        index: parseInt(index, 10), // 开始幻灯片索引。0是第一张幻灯片。必须是整数，而不是字符串。
        bgOpacity: 0.7, // 背景透明度，0-1
        maxSpreadZoom: 3, // 缩放级别，不要太大
      };
      //初始化并打开PhotoSwipe，pswpElement对应上面预览框架，PhotoSwipeUI_Default为皮肤，imgitems为图片数组，pswpoptions为选项
      var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, imgitems, pswpoptions);
      gallery.init()
    }
    /**
    * 用于添加图片点击事件
    * @param img 图片元素
    * @param index 所属下标（在imgitems中的位置）
    */
    function addImgClick(img, index) {
      img.onclick = function() {
        viewImg(index)
      }
    }
    /**
    * 轮询所有图片，获取src、width、height等数据，加入imgitems，并给图片元素添加事件
    * 最好在onload中执行该方法，本站因放在最底部，所以直接初始化
    * 异步加载图片可在图片元素创建完成后调用此方法
    */
    function initImg() {
      //重置图片数组
      imgitems = [];
      //查找class:markdown 下的所有img元素并遍历
      var imgs = document.querySelectorAll('.markdown img');
      for (var i = 0; i < imgs.length; i++) {
        var img = imgs[i];
        //本站相册初始为loading图片，真实图片放在data-src
        var ds = img.getAttribute("data-src");
        //创建image对象，用于获取图片宽高
        var imgtemp = new Image();
        //判断是否存在data-src
        if (ds != null && ds.length > 0) {
          imgtemp.src = ds
        } else {
          imgtemp.src = img.src
        }
        //判断是否存在缓存
        if (imgtemp.complete) {
          var imgobj = {
            "src": imgtemp.src,
            "w": imgtemp.width,
            "h": imgtemp.height,
          };
          imgitems[i] = imgobj;
          addImgClick(img, i);
        } else {
          console.log('进来了2')
          imgtemp.index = i;
          imgtemp.img = img;
          imgtemp.onload = function() {
            var imgobj = {
              "src": this.src,
              "w": this.width,
              "h": this.height,
            };
            //不要使用push，因为onload前后顺序会不同
            imgitems[this.index] = imgobj
            //添加点击事件
            addImgClick(this.img, this.index);
          }
        }
      }
    }
    //初始化
    initImg();
  </script>
  
    <script type="application/javascript" src="https://unpkg.com/valine"></script>
<script type="application/javascript">
  new Valine({
    el: '#vlaine-comment',
    appId: 'gkecaAzAfsNi3xd87CP5vNEQ-gzGzoHsz',
    appKey: 'cnh6zwPOGvgxFF1iCz0qfyY3',
    pageSize: 10,
    notify: true,
    avatar: 'mp',
    verify: true,
    placeholder: '来都来了，不妨评论一下',
    visitor: true,
    highlight: false,
    recordIP: true,
  })
</script>
  
  
</body>

</html>